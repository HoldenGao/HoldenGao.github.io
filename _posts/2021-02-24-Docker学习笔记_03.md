---
layout: post
title: Docker学习笔记_03
tags: [docker]
comments: true
thumbnail-img: "/assets/img/blog/image-20210222221837933.png"
share-img: ""
---

[toc]





#### 容器命令

有了镜像才可以创建容器，可以下载一个centos镜像来测试学习。

```shell
docker pull centos
```

##### 新建容器并启动

```shell
docker run [可选参数] image
#参数说明
--name="name"		容器名字
-d 							后台方式运行
-it							交互方式运行
-P 							指定端口
-p							小写p是随机指定端口


#测试，可以看到已经进入了docker容器里边

[root@gaoyang ~]# docker run -it centos /bin/bash
[root@9fa3529a6c9d /]# ls #里边有相同的目录结构，但很多命令都是不完整的
bin  dev  etc  home  lib  lib64  lost+found  media  mnt  opt  proc  root  run  sbin  srv  sys  tmp  usr  var

#退出容器
[root@9fa3529a6c9d /]# exit
exit
[root@gaoyang ~]#

```

##### 列出所有的容器



```shell
docker ps 

[root@gaoyang ~]# docker ps #列出正在运行的容器
CONTAINER ID   IMAGE     COMMAND   CREATED   STATUS    PORTS     NAMES
[root@gaoyang ~]# docker ps -a   #列出所有的容器
CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                     PORTS     NAMES
9fa3529a6c9d   centos         "/bin/bash"   9 minutes ago   Exited (0) 5 minutes ago             great_engelbart
d2f82b18576d   bf756fb1ae65   "/hello"      20 hours ago    Exited (0) 20 hours ago              elastic_easley



```



##### 退出容器

```shell
exit #停止并且退出
Ctrl + P + Q #容器不停止，仅仅退出
#开启一个容器
[root@gaoyang ~]# docker run -it centos
[root@b0b76dfccb2b /]# [root@gaoyang ~]#  #Ctrl + P + Q
[root@gaoyang ~]# 
[root@gaoyang ~]# docker ps   #可以看到该容器还在运行
CONTAINER ID   IMAGE     COMMAND       CREATED          STATUS          PORTS     NAMES
b0b76dfccb2b   centos    "/bin/bash"   23 seconds ago   Up 22 seconds             confident_cohen

```



##### 删除容器

```shell
docker rm 容器id  #删除指定的容器，但是无法删除正在运行的容器
docker rm -f $(docker ps -aq)   #删除所有的容器

[root@gaoyang ~]# docker ps -a 
CONTAINER ID   IMAGE          COMMAND       CREATED         STATUS                    PORTS     NAMES
b0b76dfccb2b   centos         "/bin/bash"   5 minutes ago   Up 5 minutes                        confident_cohen
d2f82b18576d   bf756fb1ae65   "/hello"      20 hours ago    Exited (0) 20 hours ago             elastic_easley
[root@gaoyang ~]# docker rm b0b76dfccb2b 删除正在运行的容器报错
Error response from daemon: You cannot remove a running container b0b76dfccb2bf0a37ed9e02f4b920c68000c842e2856266817d5883dc603e300. Stop the container before attempting removal or force remove
```



##### 启动和停止容器

```shell
docker start id		#启动
docker restart id	#重启
docker stop id		#停止
docker kill id		#强制停止
```





##### 常见其他命令